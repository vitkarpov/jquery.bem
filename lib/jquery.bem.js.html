<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Source code with comments - jquery.bem.js</title>

  <link rel="stylesheet" href="../assets/style.css">
  
    
      <style>
        
      </style>
    
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"/>
  <meta name="groc-relative-root" content="../"/>
  <meta name="groc-document-path" content="lib/jquery.bem.js"/>
  
</head>
<body>
  <div id="file-area">
    <div id="meta">
      <code class="file-path">
      
        lib/jquery.bem.js
      
      </code>
    </div>
    <div id="document">
    
      <div class="segment">
      
        <div class="comments doc-section">
          <div class="wrapper"><p><span class='doc-section-header'>
 &copy; Viktor Karpov <a href="&#109;&#x61;&#x69;&#x6c;&#x74;&#x6f;&#x3a;&#118;&#105;&#107;&#x74;&#x6f;&#114;&#x2e;&#115;&#46;&#107;&#x61;&#114;&#112;&#x6f;&#x76;&#64;&#x67;&#x6d;&#x61;&#x69;&#x6c;&#x2e;&#99;&#111;&#x6d;">&#118;&#105;&#107;&#x74;&#x6f;&#114;&#x2e;&#115;&#46;&#107;&#x61;&#114;&#112;&#x6f;&#x76;&#64;&#x67;&#x6d;&#x61;&#x69;&#x6c;&#x2e;&#99;&#111;&#x6d;</a>
</span></p>
<h1 id="source-code-with-comments"><a href="#source-code-with-comments" class="anchor"></a>Source code with comments</h1></div>
        </div>
      
      
        <div class="code"><pre class="wrapper">(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($, undefined)</span> </span>{</pre></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments doc-section">
          <div class="wrapper"><p>Sets modifier for each element in collection</p>
<p>Parameters:</p>
<ul>
<li><strong><code>mod</code> must be a String.</strong><br/>(modifier or block`s filter with modifier)</li>
<li><strong><code>value</code> must be a String.</strong><br/>(unnecessary value of the modifier)</li>
</ul>
<p><strong>Returns a jQuery</strong></p>
</div>
        </div>
      
      
        <div class="code"><pre class="wrapper">    $.fn.setMod = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(mod, value)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
            $(<span class="hljs-keyword">this</span>).addClass(_buildClassesAccordingToMod.call(<span class="hljs-keyword">this</span>, mod, value).join(<span class="hljs-string">' '</span>));
        });
    }
</pre></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments doc-section">
          <div class="wrapper"><p>Removes modifier for each element in collection</p>
<p>Parameters:</p>
<ul>
<li><strong><code>mod</code> must be a String.</strong><br/>(modifier or block`s filter with modifier)</li>
<li><strong><code>value</code> must be a String.</strong><br/>(unnecessary value of modifier)</li>
</ul>
<p><strong>Returns a jQuery</strong></p>
</div>
        </div>
      
      
        <div class="code"><pre class="wrapper">    $.fn.delMod = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(mod, value)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
            $(<span class="hljs-keyword">this</span>).removeClass(_buildClassesAccordingToMod.call(<span class="hljs-keyword">this</span>, mod, value).join(<span class="hljs-string">' '</span>));
        });
    }
</pre></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments doc-section">
          <div class="wrapper"><p>Checks modifier`s presence for the first element in collection</p>
<p>Parameters:</p>
<ul>
<li><strong><code>mod</code> must be a String.</strong><br/>(modifier or block`s filter with modifier)</li>
<li><strong><code>value</code> must be a String.</strong><br/>(unnecessary value of modifier)</li>
</ul>
<p><strong>Returns a Boolean</strong></p>
</div>
        </div>
      
      
        <div class="code"><pre class="wrapper">    $.fn.hasMod = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(mod, value)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.hasClass(_buildClassesAccordingToMod.call(<span class="hljs-keyword">this</span>, mod, value).join(<span class="hljs-string">''</span>));
    }
</pre></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments doc-section">
          <div class="wrapper"><p>Toggles modifier for each element in collection</p>
<p>Parameters:</p>
<ul>
<li><strong><code>mod</code> must be a String.</strong><br/>(modifier or block`s filter with modifier)</li>
<li><strong><code>value</code> must be a String.</strong><br/>(unnecessary value of modifier)</li>
</ul>
<p><strong>Returns a jQuery</strong></p>
</div>
        </div>
      
      
        <div class="code"><pre class="wrapper">    $.fn.toggleMod = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(mod, value)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">var</span> $node = $(<span class="hljs-keyword">this</span>);

            <span class="hljs-keyword">if</span> ($node.hasMod(mod, value)) {
                $node.delMod(mod, value);
            } <span class="hljs-keyword">else</span> {
                $node.setMod(mod, value);
            }
        });
    }
</pre></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments doc-section doc-section-private">
          <div class="wrapper"><p><span class='doc-section-header'>
Private
</span></p>
<p>Returns block`s classes specified on a node</p>
<pre><code class="lang-md">Warning: <span class="hljs-code">`this`</span> inside function should refer to the node
</code></pre>
<p>Parameters:</p>
<ul>
<li><strong><code>mod</code> must be a String.</strong><br/>(modifier or block`s filter with modifier)</li>
<li><strong><code>value</code> must be a String.</strong><br/>(unnecessary value of modifier)</li>
</ul>
<p><strong>Returns an Array</strong></p>
<p>Example:</p>
<pre><code><span class="hljs-comment">// node.classList = ['block1', 'block2'];</span>

<span class="hljs-comment">// block1_mod block2_mod</span>
_buildClassesAccordingToMod.<span class="hljs-function"><span class="hljs-title">call</span><span class="hljs-params">(node, <span class="hljs-string">'mod'</span>)</span></span>

<span class="hljs-comment">// block1_mod_value block2_mod_value</span>
_buildClassesAccordingToMod.<span class="hljs-function"><span class="hljs-title">call</span><span class="hljs-params">(node, <span class="hljs-string">'mod'</span>, <span class="hljs-string">'value'</span>)</span></span>

<span class="hljs-comment">// block1_mod</span>
_buildClassesAccordingToMod.<span class="hljs-function"><span class="hljs-title">call</span><span class="hljs-params">(node, <span class="hljs-string">'block1:mod'</span>)</span></span>
</code></pre></div>
        </div>
      
      
        <div class="code"><pre class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_buildClassesAccordingToMod</span><span class="hljs-params">(mod, value)</span> </span>{
        <span class="hljs-keyword">var</span> $node = $(<span class="hljs-keyword">this</span>);
        <span class="hljs-keyword">var</span> blockByFilter = _getIdBlockByFilter(mod);
        <span class="hljs-keyword">var</span> classes = (blockByFilter)
                        ? [blockByFilter]
                        : $node.attr(<span class="hljs-string">'class'</span>).split(<span class="hljs-string">' '</span>);

        <span class="hljs-keyword">if</span> (blockByFilter) {
            mod = mod.split(<span class="hljs-string">':'</span>)[<span class="hljs-number">1</span>];
        }
</pre></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments ">
          <div class="wrapper"><p>modifier without value is a boolean</p>
</div>
        </div>
      
      
        <div class="code"><pre class="wrapper">        value = value || <span class="hljs-literal">true</span>;

        <span class="hljs-keyword">return</span> classes.map(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(item)</span> </span>{
            <span class="hljs-keyword">var</span> objClass = bemNaming.parse(item);

            <span class="hljs-keyword">if</span> (!bemNaming.validate(item)) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }</pre></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments ">
          <div class="wrapper"><p><code>js-</code> prefixed classes shouldn&#39;t be processed</p>
</div>
        </div>
      
      
        <div class="code"><pre class="wrapper">            <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^js-/</span>.test(item)) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }</pre></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments ">
          <div class="wrapper"><p>we don&#39;t need to process the same mod</p>
</div>
        </div>
      
      
        <div class="code"><pre class="wrapper">            <span class="hljs-keyword">if</span> (mod === objClass.modName) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }

            <span class="hljs-keyword">return</span> bemNaming.stringify({
                block: objClass.block, elem: objClass.elem,
                modName: mod, modVal: value
            })
        }).filter(<span class="hljs-built_in">Boolean</span>);
    }
</pre></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments doc-section doc-section-private">
          <div class="wrapper"><p><span class='doc-section-header'>
Private
</span></p>
<p>Returns block`s name parsed from filter
or false if there&#39;s no match</p>
<p><strong>Returns a String or a Boolean</strong><br/>(block`s name or false)</p>
<p>Example:</p>
<pre><code class="lang-js"><span class="hljs-comment">// block</span>
_getIdBlockByFilter(<span class="hljs-string">'block:mod'</span>);
</code></pre>
</div>
        </div>
      
      
        <div class="code"><pre class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getIdBlockByFilter</span><span class="hljs-params">(filter)</span> </span>{
        <span class="hljs-keyword">var</span> matches = filter.match(<span class="hljs-regexp">/([a-zA-Z0-9-]+):/</span>);

        <span class="hljs-keyword">if</span> (matches) {
            <span class="hljs-keyword">return</span> matches[<span class="hljs-number">1</span>];
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

}(jQuery, <span class="hljs-literal">undefined</span>));</pre></div>
      
      </div>
    
    </div>
  </div>

  <script src="../toc.js"></script>
  <script src="../assets/libs.js"></script>
  <script src="../assets/behavior.js"></script>

  
    
      <script>
        (function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            w.yaCounter21389509 = new Ya.Metrika({id:21389509,
                    webvisor:true,
                    clickmap:true,
                    accurateTrackBounce:true});
        } catch(e) { }
    });

    var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
})(document, window, "yandex_metrika_callbacks");
      </script>
    
  
</body>
</html>