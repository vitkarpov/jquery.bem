<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Source code with comments - jquery.bem.js</title>

  <link rel="stylesheet" href="assets/style.css">
  
    
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"/>
  <meta name="groc-relative-root" content=""/>
  <meta name="groc-document-path" content="jquery.bem.js"/>
  
</head>
<body>
  <div id="file-area">
    <div id="meta">
      <code class="file-path">
      
        jquery.bem.js
      
      </code>
    </div>
    <div id="document">
    
      <div class="segment">
      
        <div class="comments doc-section">
          <div class="wrapper"><p><span class='doc-section-header'>
 &copy; Viktor Karpov <a href="&#x6d;&#97;&#105;&#108;&#116;&#x6f;&#x3a;&#x76;&#x69;&#x6b;&#116;&#x6f;&#114;&#x2e;&#x73;&#x2e;&#x6b;&#x61;&#x72;&#x70;&#111;&#x76;&#x40;&#103;&#x6d;&#x61;&#x69;&#x6c;&#46;&#x63;&#111;&#109;">&#x76;&#x69;&#x6b;&#116;&#x6f;&#114;&#x2e;&#x73;&#x2e;&#x6b;&#x61;&#x72;&#x70;&#111;&#x76;&#x40;&#103;&#x6d;&#x61;&#x69;&#x6c;&#46;&#x63;&#111;&#109;</a>
</span></p>
<h1 id="source-code-with-comments"><a href="#source-code-with-comments" class="anchor"></a>Source code with comments</h1></div>
        </div>
      
      
        <div class="code"><pre class="wrapper">(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($, undefined)</span> {</span>
</pre></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments doc-section">
          <div class="wrapper"><p><span class='doc-section-header'>
 of type <em>String</em>
</span></p>
<p>Delimiter for modifier.</p>
<pre><code class="lang-md">Use classic notification block__element_modifier_value
</code></pre>
</div>
        </div>
      
      
        <div class="code"><pre class="wrapper">    <span class="hljs-keyword">var</span> MOD_DLMTR = <span class="hljs-string">'_'</span>;
</pre></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments doc-section">
          <div class="wrapper"><p>Sets modifier for each element in collection</p>
<p>Parameters:</p>
<ul>
<li><strong><code>mod</code> must be a String.</strong><br/>(modifier or block`s filter with modifier)</li>
<li><strong><code>value</code> must be a String.</strong><br/>(unnecessary value of the modifier)</li>
</ul>
<p><strong>Returns a jQuery</strong></p>
</div>
        </div>
      
      
        <div class="code"><pre class="wrapper">    $.fn.setMod = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(mod, value)</span> {</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
            $(<span class="hljs-keyword">this</span>).addClass(_buildClassesAccordingToMod.call(<span class="hljs-keyword">this</span>, mod, value).join(<span class="hljs-string">' '</span>));
        });
    }
</pre></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments doc-section">
          <div class="wrapper"><p>Removes modifier for each element in collection</p>
<p>Parameters:</p>
<ul>
<li><strong><code>mod</code> must be a String.</strong><br/>(modifier or block`s filter with modifier)</li>
<li><strong><code>value</code> must be a String.</strong><br/>(unnecessary value of modifier)</li>
</ul>
<p><strong>Returns a jQuery</strong></p>
</div>
        </div>
      
      
        <div class="code"><pre class="wrapper">    $.fn.delMod = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(mod, value)</span> {</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
            $(<span class="hljs-keyword">this</span>).removeClass(_buildClassesAccordingToMod.call(<span class="hljs-keyword">this</span>, mod, value).join(<span class="hljs-string">' '</span>));
        });
    }
</pre></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments doc-section">
          <div class="wrapper"><p>Checks modifier`s presence for the first element in collection</p>
<p>Parameters:</p>
<ul>
<li><strong><code>mod</code> must be a String.</strong><br/>(modifier or block`s filter with modifier)</li>
<li><strong><code>value</code> must be a String.</strong><br/>(unnecessary value of modifier)</li>
</ul>
<p><strong>Returns a Boolean</strong></p>
</div>
        </div>
      
      
        <div class="code"><pre class="wrapper">    $.fn.hasMod = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(mod, value)</span> {</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.hasClass(_buildClassesAccordingToMod.call(<span class="hljs-keyword">this</span>, mod, value).join(<span class="hljs-string">''</span>));
    }
</pre></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments doc-section">
          <div class="wrapper"><p>Toggles modifier for each element in collection</p>
<p>Parameters:</p>
<ul>
<li><strong><code>mod</code> must be a String.</strong><br/>(modifier or block`s filter with modifier)</li>
<li><strong><code>value</code> must be a String.</strong><br/>(unnecessary value of modifier)</li>
</ul>
<p><strong>Returns a jQuery</strong></p>
</div>
        </div>
      
      
        <div class="code"><pre class="wrapper">    $.fn.toggleMod = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(mod, value)</span> {</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">var</span> $node = $(<span class="hljs-keyword">this</span>);

            <span class="hljs-keyword">if</span> ($node.hasMod(mod, value)) {
                $node.delMod(mod, value);
            } <span class="hljs-keyword">else</span> {
                $node.setMod(mod, value);
            }
        });
    }
</pre></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments doc-section doc-section-private">
          <div class="wrapper"><p><span class='doc-section-header'>
Private
</span></p>
<p>Returns block`s classes specified on a node</p>
<pre><code class="lang-md">Warning: `this` inside function should refer to the node
</code></pre>
<p>Parameters:</p>
<ul>
<li><strong><code>mod</code> must be a String.</strong><br/>(modifier or block`s filter with modifier)</li>
<li><strong><code>value</code> must be a String.</strong><br/>(unnecessary value of modifier)</li>
</ul>
<p><strong>Returns an Array</strong></p>
<p>Example:</p>
<pre><code><span class="hljs-comment">// node.classList = ['block1', 'block2'];</span>

<span class="hljs-comment">// block1_mod block2_mod</span>
_buildClassesAccordingToMod.call(node, <span class="hljs-string">'mod'</span>)

<span class="hljs-comment">// block1_mod_value block2_mod_value</span>
_buildClassesAccordingToMod.call(node, <span class="hljs-string">'mod'</span>, <span class="hljs-string">'value'</span>)

<span class="hljs-comment">// block1_mod</span>
_buildClassesAccordingToMod.call(node, <span class="hljs-string">'block1:mod'</span>)
</code></pre></div>
        </div>
      
      
        <div class="code"><pre class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_buildClassesAccordingToMod</span><span class="hljs-params">(mod, value)</span> {</span>
        <span class="hljs-keyword">var</span> $node = $(<span class="hljs-keyword">this</span>);
        <span class="hljs-keyword">var</span> blockByFilter = _getIdBlockByFilter(mod);
        <span class="hljs-keyword">var</span> classes = (blockByFilter)
                        ? [blockByFilter]
                        : $node.attr(<span class="hljs-string">'class'</span>).split(<span class="hljs-string">' '</span>);

        <span class="hljs-keyword">if</span> (blockByFilter) {
            mod = mod.split(<span class="hljs-string">':'</span>)[<span class="hljs-number">1</span>];
        }

        <span class="hljs-keyword">return</span> classes.map(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(item)</span> {</span></pre></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments ">
          <div class="wrapper"><p><code>js-</code>, <code>is-</code> and <code>_</code> prefixed classes shouldn&#39;t be processed</p>
</div>
        </div>
      
      
        <div class="code"><pre class="wrapper">            <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^(js-|is-|_)\w+/</span>.test(item)) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
</pre></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments ">
          <div class="wrapper"><p>we don&#39;t need to set mod twice</p>
<pre><code class="lang-md">**TODO**: /_(?!_)[a-zA-Z0-9-]+$/ doesn&#39;t work, why?
</code></pre>
</div>
        </div>
      
      
        <div class="code"><pre class="wrapper">            <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/_[a-zA-Z0-9-]+$/</span>.test(item.split(<span class="hljs-string">'__'</span>).pop())) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }

            <span class="hljs-keyword">var</span> clazz = item + MOD_DLMTR + mod;
            <span class="hljs-keyword">if</span> (value) {
                clazz += MOD_DLMTR + value;
            }
            <span class="hljs-keyword">return</span> clazz;
        }).filter(<span class="hljs-built_in">Boolean</span>);
    }
</pre></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments doc-section doc-section-private">
          <div class="wrapper"><p><span class='doc-section-header'>
Private
</span></p>
<p>Returns block`s name parsed from filter
or false if there&#39;s no match</p>
<p><strong>Returns a String or a Boolean</strong><br/>(block`s name or false)</p>
<p>Example:</p>
<pre><code class="lang-js"><span class="hljs-comment">// block</span>
_getIdBlockByFilter(<span class="hljs-string">'block:mod'</span>);
</code></pre>
</div>
        </div>
      
      
        <div class="code"><pre class="wrapper">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getIdBlockByFilter</span><span class="hljs-params">(filter)</span> {</span>
        <span class="hljs-keyword">var</span> matches = filter.match(<span class="hljs-regexp">/([a-zA-Z0-9-]+):/</span>);

        <span class="hljs-keyword">if</span> (matches) {
            <span class="hljs-keyword">return</span> matches[<span class="hljs-number">1</span>];
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

}(jQuery, <span class="hljs-literal">undefined</span>));</pre></div>
      
      </div>
    
    </div>
  </div>

  <script src="toc.js"></script>
  <script src="assets/libs.js"></script>
  <script src="assets/behavior.js"></script>

  
    
      <script>
        (function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            w.yaCounter21389509 = new Ya.Metrika({id:21389509,
                    webvisor:true,
                    clickmap:true,
                    accurateTrackBounce:true});
        } catch(e) { }
    });

    var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
})(document, window, "yandex_metrika_callbacks");
      </script>
    
  
</body>
</html>